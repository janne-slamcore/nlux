{"version":3,"file":"openai-react.js","sources":["../../../../packages/shared/src/types/error.ts","../../../../packages/react/openai/src/hooks/getAdapterBuilder.ts","../../../../packages/react/openai/src/hooks/useUnsafeChatAdapter.ts"],"sourcesContent":["import {NLErrorId} from './exceptions/errors';\n\nexport type NluxRawError = {\n    readonly message?: string;\n    readonly type?: string;\n    readonly source?: string;\n    readonly exceptionId?: NLErrorId;\n};\n\nexport class NluxError extends Error {\n    readonly exceptionId?: NLErrorId;\n    readonly message: string;\n    readonly source?: string;\n    readonly type: string;\n\n    constructor(rawError: NluxRawError = {}) {\n        super(rawError.message);\n\n        this.message = rawError.message ?? '';\n        this.source = rawError.source;\n        this.type = this.constructor.name;\n        this.exceptionId = rawError.exceptionId;\n    }\n}\n\nexport class NluxUsageError extends NluxError {\n}\n\nexport class NluxValidationError extends NluxError {\n}\n\nexport class NluxRenderingError extends NluxError {\n}\n","import {ChatAdapterBuilder, ChatAdapterOptions, createUnsafeChatAdapter} from '@nlux/openai';\nimport {NluxUsageError} from '@shared/types/error';\n\nconst source = 'hooks/getAdapterBuilder';\n\nexport const getAdapterBuilder = <AiMsg>(options: ChatAdapterOptions): ChatAdapterBuilder<AiMsg> => {\n    const {\n        apiKey,\n        dataTransferMode,\n        systemMessage,\n        model,\n    } = options || {};\n\n    if (dataTransferMode && dataTransferMode !== 'stream' && dataTransferMode !== 'batch') {\n        throw new NluxUsageError({\n            source,\n            message: 'Data transfer mode not supported',\n        });\n    }\n\n    if (!apiKey) {\n        throw new NluxUsageError({\n            source,\n            message: 'API key is required',\n        });\n    }\n\n    let newAdapter = createUnsafeChatAdapter<AiMsg>().withApiKey(apiKey);\n\n    if (model !== undefined) {\n        newAdapter = newAdapter.withModel(model);\n    }\n\n    if (dataTransferMode) {\n        newAdapter = newAdapter.withDataTransferMode(dataTransferMode);\n    }\n\n    if (systemMessage) {\n        newAdapter = newAdapter.withSystemMessage(systemMessage);\n    }\n\n    return newAdapter;\n};\n","import {ChatAdapterOptions, StandardChatAdapter} from '@nlux/openai';\nimport {useEffect, useState} from 'react';\nimport {getAdapterBuilder} from './getAdapterBuilder';\n\nexport const useUnsafeChatAdapter = <AiMsg>(\n    options: ChatAdapterOptions,\n): StandardChatAdapter<AiMsg> => {\n    const [isInitialized, setIsInitialized] = useState(false);\n    const [adapter, setAdapter] = useState<StandardChatAdapter<AiMsg>>(\n        getAdapterBuilder<AiMsg>(options).create(),\n    );\n\n    const {\n        apiKey,\n        dataTransferMode,\n        systemMessage,\n        model,\n    } = options || {};\n\n    useEffect(() => {\n        if (!isInitialized) {\n            setIsInitialized(true);\n            return;\n        }\n\n        const newAdapter = getAdapterBuilder<AiMsg>(options).create();\n        setAdapter(newAdapter);\n    }, [\n        apiKey,\n        dataTransferMode,\n        systemMessage,\n        model,\n    ]);\n\n    return adapter;\n};\n"],"names":["createUnsafeChatAdapter","useState","useEffect"],"mappings":";;;;;;;;;IASO,MAAM,kBAAkB,KAAA,CAAM;IAAA,EAMjC,WAAA,CAAY,QAAA,GAAyB,EAAC,EAAG;IACrC,IAAA,KAAA,CAAM,SAAS,OAAO,CAAA;IAN1B,IAAA,aAAA,CAAA,IAAA,EAAS,aAAA,CAAA;IACT,IAAA,aAAA,CAAA,IAAA,EAAS,SAAA,CAAA;IACT,IAAA,aAAA,CAAA,IAAA,EAAS,QAAA,CAAA;IACT,IAAA,aAAA,CAAA,IAAA,EAAS,MAAA,CAAA;IAKL,IAAA,IAAA,CAAK,OAAA,GAAU,SAAS,OAAA,IAAW,EAAA;IACnC,IAAA,IAAA,CAAK,SAAS,QAAA,CAAS,MAAA;IACvB,IAAA,IAAA,CAAK,IAAA,GAAO,KAAK,WAAA,CAAY,IAAA;IAC7B,IAAA,IAAA,CAAK,cAAc,QAAA,CAAS,WAAA;IAAA,EAChC;IACJ;IAEO,MAAM,uBAAuB,SAAA,CAAU;IAC9C;;ICvBA,MAAM,MAAA,GAAS,yBAAA;IAER,MAAM,iBAAA,GAAoB,CAAQ,OAAA,KAA2D;IAChG,EAAA,MAAM;IAAA,IACF,MAAA;IAAA,IACA,gBAAA;IAAA,IACA,aAAA;IAAA,IACA;IAAA,GACJ,GAAI,WAAW,EAAC;IAEhB,EAAA,IAAI,gBAAA,IAAoB,gBAAA,KAAqB,QAAA,IAAY,gBAAA,KAAqB,OAAA,EAAS;IACnF,IAAA,MAAM,IAAI,cAAA,CAAe;IAAA,MACrB,MAAA;IAAA,MACA,OAAA,EAAS;IAAA,KACZ,CAAA;IAAA,EACL;IAEA,EAAA,IAAI,CAAC,MAAA,EAAQ;IACT,IAAA,MAAM,IAAI,cAAA,CAAe;IAAA,MACrB,MAAA;IAAA,MACA,OAAA,EAAS;IAAA,KACZ,CAAA;IAAA,EACL;IAEA,EAAA,IAAI,UAAA,GAAaA,8BAAA,EAA+B,CAAE,UAAA,CAAW,MAAM,CAAA;IAEnE,EAAA,IAAI,UAAU,MAAA,EAAW;IACrB,IAAA,UAAA,GAAa,UAAA,CAAW,UAAU,KAAK,CAAA;IAAA,EAC3C;IAEA,EAAA,IAAI,gBAAA,EAAkB;IAClB,IAAA,UAAA,GAAa,UAAA,CAAW,qBAAqB,gBAAgB,CAAA;IAAA,EACjE;IAEA,EAAA,IAAI,aAAA,EAAe;IACf,IAAA,UAAA,GAAa,UAAA,CAAW,kBAAkB,aAAa,CAAA;IAAA,EAC3D;IAEA,EAAA,OAAO,UAAA;IACX,CAAA;;ACtCO,UAAM,oBAAA,GAAuB,CAChC,OAAA,KAC6B;IAC7B,EAAA,MAAM,CAAC,aAAA,EAAe,gBAAgB,CAAA,GAAIC,eAAS,KAAK,CAAA;IACxD,EAAA,MAAM,CAAC,OAAA,EAAS,UAAU,CAAA,GAAIA,cAAA;IAAA,IAC1B,iBAAA,CAAyB,OAAO,CAAA,CAAE,MAAA;IAAO,GAC7C;IAEA,EAAA,MAAM;IAAA,IACF,MAAA;IAAA,IACA,gBAAA;IAAA,IACA,aAAA;IAAA,IACA;IAAA,GACJ,GAAI,WAAW,EAAC;IAEhB,EAAAC,eAAA,CAAU,MAAM;IACZ,IAAA,IAAI,CAAC,aAAA,EAAe;IAChB,MAAA,gBAAA,CAAiB,IAAI,CAAA;IACrB,MAAA;IAAA,IACJ;IAEA,IAAA,MAAM,UAAA,GAAa,iBAAA,CAAyB,OAAO,CAAA,CAAE,MAAA,EAAO;IAC5D,IAAA,UAAA,CAAW,UAAU,CAAA;IAAA,EACzB,CAAA,EAAG;IAAA,IACC,MAAA;IAAA,IACA,gBAAA;IAAA,IACA,aAAA;IAAA,IACA;IAAA,GACH,CAAA;IAED,EAAA,OAAO,OAAA;IACX;;;;;;;;;;;;"}