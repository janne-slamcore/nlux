"use strict";var e=require("@nlux/nlbridge"),t=require("react");const r=t=>{const{url:r,mode:o,context:n,headers:a}=t||{};if(o&&"copilot"!==o&&"chat"!==o)throw new Error("Data transfer mode not supported");if(!r)throw new Error("Runnable URL is required");let s=e.createChatAdapter().withUrl(r);return o&&(s=s.withMode(o)),n&&(s=s.withContext(n)),a&&(s=s.withHeaders(a)),s.create()};Object.defineProperty(exports,"createChatAdapter",{enumerable:!0,get:function(){return e.createChatAdapter}}),Object.defineProperty(exports,"createContextAdapter",{enumerable:!0,get:function(){return e.createContextAdapter}}),exports.useChatAdapter=e=>{const{context:o,url:n,mode:a,headers:s}=e,[c,i]=t.useState(s);t.useEffect(()=>{if(s||!c)if(!s||c){if(s&&c){if(Object.keys(s).length!==Object.keys(c).length)return void i(s);for(const e in s)if(s[e]!==c[e])return void i(s)}}else i(s);else i(void 0)},[s]);const u=o?.ref?t.useContext(o.ref):void 0,[d,f]=t.useState(r({url:n,mode:a,context:u,headers:s}));return t.useEffect(()=>{const e=r({url:n,mode:a,headers:c,context:u});f(e)},[n,a,c,u]),d};
